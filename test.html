<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <title>Document</title>
    <script>
        // Post 저장 test
        function savePost() {
            $.ajax({
                type: 'POST',
                url: '/api/posts',
                data: {
                    user_name : "test010",
                    title : "test010",
                    content : "test010",
                    createdAt : "test010"
                        },
                success: function (response) {   
                    alert('저장완료')
                    location.href = '/' 
                    console.log(response)
                }
            })
        }
        
        // Post 수정 test
        function modifyPost(){
            var post_id = 8
            $.ajax({
                type: 'POST',
                url: `/api/modify/${post_id}`,
                data: {
                    post_id : post_id,
                    title : "modify teest008",
                    user_name : "modify teest008",
                    content : "modify teest008",
                    createdAt : "modify teest008"
                    },
                success: function (response) {
                    alert('수정완료')
                    console.log(response)  
                    location.href = '/'   
                }
            })
        }

        // Post 삭제 test
        function deletePost(){
            var post_id = 6
            $.ajax({
                type: 'delete',
                url: `/api/delete/${post_id}`,
                data: {
                    post_id : post_id,                    
                    },
                success: function (response) {
                    alert('삭제완료')
                    console.log(response)
                    location.href = '/'     
                }
            })
        }

        // Main Page -> Post List test
        $(document).ready(function () {
            postlist();
        });
        function postlist() { 
            $.ajax({
                type: 'GET',
                url: '/api/main',
                dataType:'json',
                data: {},
                success: function (response) {
                    var postList = response.result;
                    console.log('postList-->',postList);
                    var str = "";
                    for(var i=0;i<postList.length;i++){
                        str+='<div>{';
                        str+='<div>post_id : '+postList[i].post_id+'</div>';
                        str+='<div>user_name : '+postList[i].user_name+'</div>';
                        str+='<div>title : '+postList[i].title+'</div>';
                        str+='<div>content : '+postList[i].content+'</div>';
                        str+='<div>createdAt : '+postList[i].createdAt+'</div>';
                        str+='</div>}';
                    }
                    $('#post_List').append(str);
                }
            })
        }





    </script>
</head>
<body>
    <button id="savePost" onclick="savePost()">savePost</button>
    <button id="modifyPost" onclick="modifyPost()">modifyPost</button>
    <button id="deletePost" onclick="deletePost()">deletePost</button>
    <div id="post_List">POST LIST</div>
    
    
</body>
</html>